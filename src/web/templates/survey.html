$def with (recommends, pkg_details, form, request)
$var title: Survey
$var mod = 'survey';
$var cssfiles: static/coda-slider-2.0/stylesheets/coda-slider-2.0.css static/css/facebox.css static/css/survey.css
$var jsfiles: static/coda-slider-2.0/javascripts/jquery-1.3.2.min.js static/coda-slider-2.0/javascripts/jquery.coda-slider-2.0.js static/coda-slider-2.0/javascripts/jquery.easing.1.3.js static/js/facebox.js


<script type="text/javascript">
    $$(document).ready(function() {
        $$("#bar-header").click(function () {
        $$("#header").slideToggle("slow");
        });    
        $$('a[rel*=facebox]').facebox({
        loadingImage : '/static/images/loading.gif',
        closeImage   : '/static/images/closelabel.png'
        });
        $$('#coda-slider-1').codaSlider({dynamicTabs: false, dynamicArrowLeftText: "&#171;", dynamicArrowRightText:"next &#187;" });
    });
</script>

<div id="sidebar">
<div class="innertube">

<div id="details_box" class="graybox align-left">
<h2>Recommendation strategy details</h2>
        <ul class="toc">
	$for key, value in request.get_details().items():

        <li><b>$key:</b> $value</li>

</div><!-- id="details_box" -->

</div><!-- class="innertube" -->
<br style="clear: both">
</div><!-- id="sidebar" -->

<div id="maincontent">
<div class="innertube">

<h1>AppRecommender Survey</h1>

<form action="/thanks" method="post" enctype="multipart/form-data" name="surveyform">

<div class="coda-slider-wrapper">
	<div class="coda-slider preload" id="coda-slider-1">
$for pkg in pkg_details:
            <div class="panel">
            	<div class="panel-wrapper">
		     <div id="panel-controls">
       			<label for="good-$pkg['package']">Good</label>
			<input type="checkbox" name="good-$pkg['package']" /><br />
			<label for="surprise-$pkg['package']">Surprise</label>
			<input type="checkbox" name="surprise-$pkg['package']" /> 
		     </div><!-- #panel-controls -->
			<h1 id="title_pkg">$pkg['package'] <br />
			<span>$pkg['description']</span></h1>
            		<div class="content-pkg">
			<div class="screenshot">
			<a class="link-thumb" rel="facebox" href="http://screenshots.debian.net/screenshot/$pkg['package']?.jpg" title="Screenshot of package $pkg['package']">
			<img src="http://screenshots.debian.net/thumbnail/$pkg['package']" alt="Screenshot $pkg['package']" /></a>
			</div><!-- .item -->
			    <li><b>Description</b>: <br />$:pkg['long_description']</li>
			    $if pkg['homepage']:
			        <li><b>Homepage</b>: $pkg['homepage']</li>
			    $if pkg['task']:
			        <li><b>Tasks</b>: $pkg['task']</li>
			    <li><b>Section</b>: $pkg['section']</li>
			    $if pkg['recommends']:
			        <li><b>Recommends</b>: $pkg['recommends']</li>
			    $if pkg['suggests']:
			        <li><b>Suggests</b>: $pkg['suggests']</li>
			    $if pkg['origin']:
			        <li><b>Origin</b>: $pkg['origin']</li>
			    <li><b>Maintainer</b>: $pkg['maintainer']</li>
			  </ul>
			</div><!-- id="content-pkg" -->
            	</div><!-- .panel-wrapper -->
            </div><!-- .panel -->
</div><!-- .coda-slider -->
</div><!-- .coda-slider-wrapper -->

<div id="controls-form">
<a href="#finish" id="finish-button" class="glass">Finish 
  <div class="tip important" id="tip-finish"><p>Tem certeza que não gostaria de avaliar uma nova estratégia? </p></div>
</a>
<label for="strategy_button" id="tip-strategy"><div class="tip note"><p> Gerar um novo resultado com uma estratégia diferente para mesma lista de pacotes ou <a id="bar-header">envie uma nova lista de pacotes</a>. </p></div><input id="strategy-button" name="strategy_button" type="submit" value="New Strategy" class="glass" /></label>
</div>

</form>


</div><!-- class="innertube" -->
</div><!-- id="maincontent" -->
