$def with (pkg_details, request)
$var title: Survey
$var mod = 'survey';
$var cssfiles: static/coda-slider-2.0/stylesheets/coda-slider-2.0.css static/css/facebox.css static/css/survey.css
$var jsfiles: static/coda-slider-2.0/javascripts/jquery-1.3.2.min.js static/coda-slider-2.0/javascripts/jquery.coda-slider-2.0.js static/coda-slider-2.0/javascripts/jquery.easing.1.3.js static/js/facebox.js


<script type="text/javascript">
    $$(document).ready(function() {
        $$("input[type=radio]").click(function () {
        $$("#coda-nav-right-1").show("fast");
        });

        $$('a[rel*=facebox]').facebox({
        loadingImage : '/static/images/loading.gif',
        closeImage   : '/static/images/closelabel.png'
        });
        $$('#coda-slider-1').codaSlider({dynamicTabs: false, dynamicArrowLeftText: "L", dynamicArrowRightText:"Next" });
    });

</script>


<div id="maincontent">
<div class="innertube">

<h1>AppRecommender Survey</h1>

<form action="/save" method="post" enctype="multipart/form-data" name="surveyform">

<input type="hidden" name="user_id" value=$request.user_id>
<input type="hidden" name="strategy" value=$request.strategy>
<div id="controls-form" style="display: none;"><!-- display show in the end form -->

<label for="restart_button" id="tip-restart">
   <div class="tip note">
    <p>Restart the survey with a new packages list.</p>
   </div>
   <input id="restart-button" name="restart_button" type="submit" value="Restart" class="glass" />
</label>

<label for="finish_button" id="tip-finish">
   <div class="tip important">
   <p>Conclude your participation in this survey</p>
   </div>
   <input id="finish-button" name="finish_button" type="submit" value="Finish" class="glass" rel="facebox" />
</label>

<label for="strategy_button" id="tip-strategy">
   <div class="tip tip">
   <p> New round of evaluations for the same list of packages and suggestions produced by a different recommendation strategy. </p>
   </div>
   <input id="strategy-button" name="strategy_button" type="submit" value="New Round" class="glass" />
</label>

</div><!-- id="controls-form" -->

<div class="coda-slider-wrapper">
	<div class="coda-slider preload" id="coda-slider-1">
$for pkg in pkg_details:
            <div class="panel">
            	<div class="panel-wrapper">
		     <div id="panel-controls">
			<label for="poor">Poor</label>
			<input accesskey="p" class="radio" type="radio" onClick="; showNext();" name="evaluation-$pkg_details.index(pkg)" value="poor" /><br />
       			<label for="good">Good</label>
			<input accesskey="g" class="radio" type="radio" onClick="javascript: showNext();" name="evaluation-$pkg_details.index(pkg)" value="good" /><br />
			<label for="surprising">Surprising</label>
			<input accesskey="s" class="radio" type="radio" onClick="showNext()" name="evaluation-$pkg_details.index(pkg)" value="surprising" />
		     </div><!-- #panel-controls -->
			<h1 id="title_pkg">$pkg['package'] <br />
			<span>$pkg['description']</span></h1>
            		<div class="content-pkg">
			<div class="screenshot">
			<a class="link-thumb" rel="facebox" href="http://screenshots.debian.net/screenshot/$pkg['package']?.jpg" title="Screenshot of package $pkg['package']">
			<img src="http://screenshots.debian.net/thumbnail/$pkg['package']" alt="Screenshot $pkg['package']" /></a>
			</div><!-- .item -->
			    <li><b>Description</b>: <br />$:pkg['long_description']</li>
			    $if pkg['homepage']:
			        <li><b>Homepage</b>: $pkg['homepage']</li>
			    $if pkg['task']:
			        <li><b>Tasks</b>: $pkg['task']</li>
			    <li><b>Section</b>: $pkg['section']</li>
			    $if pkg['recommends']:
			        <li><b>Recommends</b>: $pkg['recommends']</li>
			    $if pkg['suggests']:
			        <li><b>Suggests</b>: $pkg['suggests']</li>
			    $if pkg['origin']:
			        <li><b>Origin</b>: $pkg['origin']</li>
			    <li><b>Maintainer</b>: $pkg['maintainer']</li>
			  </ul>
			</div><!-- id="content-pkg" -->
            	</div><!-- .panel-wrapper -->
            </div><!-- .panel -->
</div><!-- .coda-slider -->
</div><!-- .coda-slider-wrapper -->

</form>

</div><!-- class="innertube" -->
</div><!-- id="maincontent" -->

